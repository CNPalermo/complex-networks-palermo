

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Esame Ferrara, 22/02/2023 &#8212; CN Palermo</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'contributions/ferrara/esame_ferrara/esame_CN_Ferrara_22_02_2023_original_document';</script>
    <link rel="shortcut icon" href="../../../_static/cnpa_logo.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Esame Ferrara, better edge-switcher" href="esame_CN_Ferrara_22_02_2023-better_edge_switcher.html" />
    <link rel="prev" title="Ferrara Contributions" href="../ferrara.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../../README.html">
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/cnpa_banner_alt.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../../_static/cnpa_banner_alt.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Complex Networks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../source/test_notebook.html">Test Notebook</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/airport_data.html">Airport Data Converter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/airport_logo.html">Complex Network Logo</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributions</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../ferrara.html">Ferrara Contributions</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Esame Ferrara, 22/02/2023</a></li>
<li class="toctree-l2"><a class="reference internal" href="esame_CN_Ferrara_22_02_2023-better_edge_switcher.html">Esame Ferrara, better edge-switcher</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/CNPalermo/complex-networks-palermo" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/contributions/ferrara/esame_ferrara/esame_CN_Ferrara_22_02_2023_original_document.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Esame Ferrara, 22/02/2023</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prima-domanda-illustrare-lo-small-world-model">Prima domanda: Illustrare lo Small World model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seconda-domanda-illustrare-il-concetto-di-percolazione-e-perche-e-rilevante-in-complex-networks">Seconda domanda: Illustrare il concetto di percolazione e perché è rilevante in Complex Networks</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terza-domanda-codice">Terza domanda: codice!</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="esame-ferrara-22-02-2023">
<h1>Esame Ferrara, 22/02/2023<a class="headerlink" href="#esame-ferrara-22-02-2023" title="Permalink to this headline">#</a></h1>
<section id="prima-domanda-illustrare-lo-small-world-model">
<h2>Prima domanda: Illustrare lo Small World model<a class="headerlink" href="#prima-domanda-illustrare-lo-small-world-model" title="Permalink to this headline">#</a></h2>
<p>Lo Small World è uno dei quattro newtwork fondamentali che abbiamo studiato, spesso ci si riferisce ad esso con il nome di “Watts-Strogatz model”, dai suoi creatori.
L’idea alla base dello Small World è che si parte da un k-regular network con k strettamente pari, questo non è altro che un network in cui ogni nodo ha degree pari a k, ad esempio un 3-regular network è un network in cui ogni nodo è connesso ad altri 3 nodi.
Chiaramente la degree distribution di un simile network è una delta dirac sul valore k.
Una volta che si ha il k-regular network si può applicare un processo detto “rewiring”: Si può immaginare il network come un anello di nodi, si itera su ogni nodo in senso orario (per esempio), e si scrivono i link che ha il nodo i-esimo nel suo verso orario, per ognuno di questi link si estrarrà un numero random float compreso fra 0 e 1, e si comparerà con la cosidettà “rewiring probability” p, se il numero estratto è più basso di p il link viene spezzato, e si riconnetterà il nodo con un nodo “lontano”, dove “lontano” significa che non era connesso al nodo originale.
Una volta fatto ciò si ottiene uno Small World network.
Chiaramente il risultato finale dipende dalla rewiring probability p, se p = 1 il rewiring è totale e non resta nessuna informazione del network k-regular originale (a parte chiaramente il degree medio che resta k e il numero di nodi N), si ottiene un grafico che è a tutti gli effetti una realizzazione di Erdos-Reinyi equivalente ad uno generato - considerando che il k medio resta quello ereditato dal k-regular - con la p (di ER) che è pari generalmente a k/N, dove N è il numero di nodi del network, ereditato chiaramente anch’esso dal k-regular, e k è proprio quello del k-regular.
Per rewiring probability più basse abbiamo uno Small World classico, le sue caratteristiche essenziali sono che l’average shortest path lenght è generalmente più basso di un grafico che ad esempio otterremmo applicando un configuration model e ricalcolandolo, da ciò la classica frase “it’s a small world!” per indicare che l’ASPL fra due nodi è in effetti più basso di un grafico come ER, dove tende a infinito per N che tende a infinito.
Si può dire la stessa cosa del Global Clustering Coefficient, questo risulta mediamente più alto di quello che otterremo applicando il configuration model, al contrario di ER dove il CC tende a 0 per N tendente a infinito (si può dimostrare che il CC in un ER va come p, dove con p=1 chiaramente tutti i triangoli sono chiusi, quindi è pari a 1).
In generale la degree distribution di uno Small World è pari ad una gaussiana, infatti il k medio si allarga (considerando che si partiva da una delta dirac!), ha quindi un decadimento esponenziale, più simile quindi alla coda di un ER che ad un grafico scale-free come Barabasi_Albert o Borgatti_Everett.</p>
</section>
<section id="seconda-domanda-illustrare-il-concetto-di-percolazione-e-perche-e-rilevante-in-complex-networks">
<h2>Seconda domanda: Illustrare il concetto di percolazione e perché è rilevante in Complex Networks<a class="headerlink" href="#seconda-domanda-illustrare-il-concetto-di-percolazione-e-perche-e-rilevante-in-complex-networks" title="Permalink to this headline">#</a></h2>
<p>Per spiegare la percolazione possiamo immaginare uno strato di roccia bidimenzionale che ha dell’acqua sopra ed una cavità sotto.
Se rimuoviamo cerchi di area sempre uguali nella roccia, l’acqua prima o poi riuscirà a passare.
Si può scrivere una quantità r chiamata “order parameter” che è proprio il rapporto fra il volume (o l’area, in 2D) che è stato “forato” e quello totale.
Possiamo immaginare un lattice bidimensionale, consideriamo quindi che ogni nodo in questo lattice ha una probabilità p di essere presente o no, quale è la probabilità minima necessaria affinché si può arrivare da un estremo all’altro del lattice?
In un lattice 2D questa p_c è pari a circa 0.59.
Nello studio dei Complex Network la percolazione è un concetto che ha molte applicazioni, ad esempio con un approccio basato sulla percolazione possiamo chiederci quale sia la probabilità necessaria associata alla presenza di nodi per cui abbiamo una giant component (e siamo quindi in grado, generalmente, di andare da nodo A a nodo B per qualsiasi A e B), utilizzando questo tipo di approccio si trova che la p_c è pari a (&lt;k^2&gt; - 2<k>) / (&lt;k^2&gt; - <k>), ciò deriva dalla condizione di Molloy_Reed in cui &lt;k^2&gt; - 2<k> &gt; 0 , in particolare si può anche indagare sulla vulnerabilità dei network, ad esempio ci si può chiedere: se si rimuovono nodi casualmente con probabilità p, quale è il valore che p deve avere per riuscire a “rompere” la giant component? Per un network Scale Free tipo Barabasi Albert viene fuori che p_c è quasi 1, ovvero è praticamente indistruttibile contro attachi random di questo tipo.
In effetti per rompere il network sarebbe meglio utilizzare attacchi più strategici, ad esempio attaccando i nodi con alta betweenness.
Un approccio legato alla percolazione è anche importante in un network dei contatti che sta alla base di un modello SIR per esempio, la percolazione critica a quel punto è la probabilità che dovremmo usare nel rimuovere casualmente ogni nodo per “interrompere” lo spreading di un’epidemia, ovvero può considerarsi ad esempio legata alla frazione di popolazione che bisogna vaccinare.</p>
</section>
<section id="terza-domanda-codice">
<h2>Terza domanda: codice!<a class="headerlink" href="#terza-domanda-codice" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#importiamo qualche utile libreria!</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">igraph</span> <span class="k">as</span> <span class="nn">ig</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Fortunatamente ho già l&#39;edgelist del network degli aereoporti sul pc, chiaramente non pesata e non diretta.</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">ig</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">Read_Ncol</span><span class="p">(</span><span class="s2">&quot;airport_original_edgelist.txt&quot;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">directed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1">#carichiamo il grafico dalla edgelist!</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;graphopt&quot;</span><span class="p">,</span> <span class="n">vertex_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">450</span><span class="p">))</span> <span class="c1">#plottiamo il network</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prendiamoci la giant component:</span>
<span class="n">airports_original</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">connected_components</span><span class="p">()</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">airports_original</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;graphopt&quot;</span><span class="p">,</span> <span class="n">vertex_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">450</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Scriviamo un codice che ci permetta di fare il configuration model:</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">edge_switcher</span><span class="p">(</span><span class="n">edgelist</span><span class="p">):</span>
    <span class="c1"># mi genero un vettore &quot;random order&quot;, con l&#39;idea che fa da indice (ogni indice NON si ripete mai) ma in ordine randomico!</span>
    <span class="n">random_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">edgelist</span><span class="p">))]</span>
    <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">random_order</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">edgelist</span><span class="p">)):</span>
        <span class="c1">#mi genero un numero int random casuale che chiaramente farà da indice quindi è compreso fra 0 e len(edgelist)-1</span>
        <span class="n">rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">edgelist</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="c1">#mi trovo un link casuale, ad esempio edgelist[randomorder[i]], e li richiamo in modo più leggibile</span>
        <span class="n">A_1</span> <span class="o">=</span> <span class="n">edgelist</span><span class="p">[</span><span class="n">random_order</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">B_1</span> <span class="o">=</span> <span class="n">edgelist</span><span class="p">[</span><span class="n">random_order</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="c1">#faccio la stessa cosa però con un link nella posizione rand</span>
        <span class="n">A_2</span> <span class="o">=</span> <span class="n">edgelist</span><span class="p">[</span><span class="n">rand</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">B_2</span> <span class="o">=</span> <span class="n">edgelist</span><span class="p">[</span><span class="n">rand</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        
        
        <span class="c1"># questi if fanno da controllo, essenzialmente controllano che i link una volta switchati non siano self loops o multi loops, ma invece di andare avanti nel codice e basta, abbasso l&#39;indice i di uno e uscendo dal for posso riprovare a fare lo switch finchè non funziona a dovere (ovvero no self-loops no multi-links), la funzione max serve a fare in modo che se lo switch fallisce proprio all&#39;iterazione 0 non mi ritrovo un indice i negativo!</span>
        <span class="k">if</span> <span class="n">A_1</span> <span class="o">==</span> <span class="n">B_2</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">B_1</span> <span class="o">==</span> <span class="n">A_2</span> <span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">A_1</span><span class="p">,</span><span class="n">B_2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">edgelist</span> <span class="ow">or</span> <span class="p">(</span><span class="n">A_2</span><span class="p">,</span><span class="n">B_1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">edgelist</span> <span class="ow">or</span> <span class="p">(</span><span class="n">B_2</span><span class="p">,</span><span class="n">A_1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">edgelist</span> <span class="ow">or</span> <span class="p">(</span><span class="n">B_1</span><span class="p">,</span><span class="n">A_2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">edgelist</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">continue</span>
        
        
        <span class="c1">#se tutto funziona a dovere, switcho in effetto i link (ovvero se ho A-B e C-D alla fine avrò A-D e C-B)</span>
        <span class="n">tuple1</span> <span class="o">=</span> <span class="p">(</span><span class="n">A_1</span><span class="p">,</span> <span class="n">B_2</span><span class="p">)</span>
        <span class="n">tuple2</span> <span class="o">=</span> <span class="p">(</span><span class="n">A_2</span><span class="p">,</span> <span class="n">B_1</span><span class="p">)</span>
        <span class="n">edgelist</span><span class="p">[</span><span class="n">random_order</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">tuple1</span>
        <span class="n">edgelist</span><span class="p">[</span><span class="n">rand</span><span class="p">]</span> <span class="o">=</span> <span class="n">tuple2</span>
        
        
    <span class="k">return</span> <span class="n">edgelist</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># per applicare il configuration model ci serve l&#39;edgelist del network, prendiamocela</span>

<span class="n">edgelist</span> <span class="o">=</span> <span class="n">airports_original</span><span class="o">.</span><span class="n">get_edgelist</span><span class="p">()</span> <span class="c1">#chiaramente prendiamo l&#39;edgelist della giant component</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># adesso scriviamo un ciclo for che ci realizza n realizzazioni del configuration model!</span>

<span class="n">nr</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># vogliamo 100 realizzazioni</span>
<span class="n">random_edgelist_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">nr</span> <span class="c1"># inizializziamo la lista lunga nr</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr</span><span class="p">):</span>
    <span class="n">random_edgelist_vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">edge_switcher</span><span class="p">(</span><span class="n">edgelist</span><span class="p">)</span>
    
<span class="c1"># il ciclo for sopra potrebbe metterci un po&#39; ad eseguire, il tempo scala linearmente con nr, per nr = 1 ci mette circa 6 secondi, quindi con nr = 100 ci metterà circa 10 minuti sul mio portatile</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># guardiamo un network a caso di quelli generati</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">index</span> <span class="o">=</span> <span class="mi">6</span> <span class="c1"># cambiare questo indice per vedere grafici diversi!</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">ig</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">random_edgelist_vector</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">directed</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;graphopt&quot;</span><span class="p">,</span> <span class="n">vertex_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">450</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># adesso calcoliamoci una partition del network originale usando la modularity</span>

<span class="n">community_original</span> <span class="o">=</span> <span class="n">airports_original</span><span class="o">.</span><span class="n">community_multilevel</span><span class="p">()</span> <span class="c1"># questo algoritmo dovrebbe basarsi sull&#39;argoritmo di Blondel che massimizza la modularità</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plottiamo la partizione del network originale</span>
<span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">community_original</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;graphopt&quot;</span><span class="p">,</span> <span class="n">vertex_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">450</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># creiamo un for loop per caricare su igraph ognuna di queste partizioni</span>

<span class="n">airports_switched_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">nr</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr</span><span class="p">):</span>
    <span class="n">airports_switched_vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ig</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">random_edgelist_vector</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">directed</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="c1">#è una lista di grafici igraph!</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># creiamo un for loop per calcolarci le 100 partitions dei 100 networks utilizzando lo stesso algoritmo</span>

<span class="n">community_switched_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">nr</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr</span><span class="p">):</span>
    <span class="n">community_switched_vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">airports_switched_vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">community_multilevel</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plottiamo la partizione di un network del configuration model a caso</span>
<span class="n">index</span> <span class="o">=</span> <span class="mi">7</span> <span class="c1"># cambiare qui per vedere partizioni diverse!</span>

<span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">community_switched_vector</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;graphopt&quot;</span><span class="p">,</span> <span class="n">vertex_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">450</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># per testare il codice, calcoliamoci l&#39;ARI fra la partizione originale del network e... se stessa</span>

<span class="n">ARI</span> <span class="o">=</span> <span class="n">ig</span><span class="o">.</span><span class="n">compare_communities</span><span class="p">(</span><span class="n">community_original</span><span class="p">,</span> <span class="n">community_original</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;adjusted_rand&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ARI</span><span class="p">)</span> <span class="c1">#dovrebbe fare 1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># adesso calcoliamo l&#39;ARI fra le partizioni trovate e quello originale, chiaramente avremo un vettore di ARI</span>

<span class="n">ARI_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">nr</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr</span><span class="p">):</span>
    <span class="n">ARI_vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ig</span><span class="o">.</span><span class="n">compare_communities</span><span class="p">(</span><span class="n">community_original</span><span class="p">,</span> <span class="n">community_switched_vector</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;adjusted_rand&quot;</span><span class="p">)</span> <span class="c1">#compute the ARI between 2 communities</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ARI_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ARI_vector</span><span class="p">)</span> <span class="c1">#first use of numpy in the code!!!</span>

<span class="n">ARI_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ARI_np</span><span class="p">)</span>
<span class="n">ARI_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ARI_np</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;L&#39;ARI medio risulta: </span><span class="si">{}</span><span class="s2">. La sua deviazione standard è pari a: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ARI_mean</span><span class="p">,</span> <span class="n">ARI_std</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Chiaramente l’ARI medio è praticamente nullo, considerando che le partizioni effettuate sulle varie realizzazioni del configuration model non c’entrano niente con quella originale.</p>
<p>L’RI atteso, anche scritto E[RI] è il valore medio atteso dell’RI (Rand Index) trovato su N molto grande di realizzazioni di partizioni randomiche (ad esempio usando il configuration model, proprio come fatto qui). L’ARI in generale si definisce come (RI-E[RI]) / (max(RI) - E[RI]), e si può dimostrare come l’ARI si può poi scrivere in funzione di a,b,c,d che sono, rispettivamente (frazioni di nodi nelle stesse community in part1 e part2, frazioni di nodi in stessa community in part1 ma non in part2, frazioni di nodi nella stessa community in part2 ma non in part1, e frazioni di nodi che non sono nella stessa community sia in part1 che part2).</p>
<p>L’E[ARI] che abbiamo calcolato in questo caso, è supposto che faccia 0, serve come “baseline” per valutare l’ARI ottenuto invece fra due partizioni differenti ma non casuali</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./contributions\ferrara\esame_ferrara"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../ferrara.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Ferrara Contributions</p>
      </div>
    </a>
    <a class="right-next"
       href="esame_CN_Ferrara_22_02_2023-better_edge_switcher.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Esame Ferrara, better edge-switcher</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prima-domanda-illustrare-lo-small-world-model">Prima domanda: Illustrare lo Small World model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seconda-domanda-illustrare-il-concetto-di-percolazione-e-perche-e-rilevante-in-complex-networks">Seconda domanda: Illustrare il concetto di percolazione e perché è rilevante in Complex Networks</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terza-domanda-codice">Terza domanda: codice!</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Alessandro Romancino, Salvatore Micciché
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>